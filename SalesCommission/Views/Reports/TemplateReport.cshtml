@model SalesCommission.Models.TemplateReportModel

@{
    ViewBag.Title = "Template Report";
    var applicationPath = Request.ApplicationPath;

    if (applicationPath == "/")
    {
        applicationPath = "";
    }

    var storeLocations = new List<string>();

    if (Model.StoreLeadInformation != null)
    {
        foreach (var store in Model.StoreLeadInformation)
        {
            var storeName = store.StoreId;

            foreach (var vinStore in SalesCommission.Business.Enums.VinStores)
            {
                if (vinStore.StoreId == store.DealerId)
                {
                    storeName = vinStore.Name;
                }
            }
            storeLocations.Add(storeName);
        }
    }


    var breakDowns = new List<string>();
    var breakDownValues = new List<string>();

    breakDowns.Add("Associate");
    breakDownValues.Add("associatename");

    //breakDowns.Add("Brand");
    //breakDownValues.Add("brand");

    breakDowns.Add("Inventory Type");
    breakDownValues.Add("inventorytype");

    breakDowns.Add("Lead Date");
    breakDownValues.Add("leaddate");

    breakDowns.Add("Lead Time");
    breakDownValues.Add("leadtime");

    breakDowns.Add("Lead Month Year");
    breakDownValues.Add("leadmonthyear");


    breakDowns.Add("Lead Group");
    breakDownValues.Add("leadgroupname");

    breakDowns.Add("Lead Source");
    breakDownValues.Add("leadsourcename");

    breakDowns.Add("Lead Condition");
    breakDownValues.Add("leadstatusname");

    breakDowns.Add("Lead Status");
    breakDownValues.Add("leadstatustype");

    breakDowns.Add("Location");
    breakDownValues.Add("locationid");

    breakDowns.Add("Make");
    breakDownValues.Add("make");

    breakDowns.Add("Model");
    breakDownValues.Add("model");

    breakDowns.Add("Sales Team");
    breakDownValues.Add("salesteam");

    breakDowns.Add("Stock Number");
    breakDownValues.Add("stock");

    breakDowns.Add("Zip Code");
    breakDownValues.Add("zip");

}
@section CSS
{
    <link rel="stylesheet" href="~/Scripts/Chosen/chosen.css">
    <link rel="stylesheet" href="~/Scripts/jquery-ui.css">

    <script type="text/javascript">
        var dialogWidth = 0;

        dialogWidth = ($(window).width() * .75);

        if ($(window).width() > 1199) {
            dialogWidth = 800;
        }
    </script>
}

<style type="text/css">

    .container{
        max-width:100%;
    }

    th.text-center.sorting_asc {
        background-color: #FFFF7C;
    }

    th.text-center.sorting_desc {
        background-color: #FFFF7C;
    }

    td.text-center.sorting_1 {
        background-color: #FFFF7C !important;
    }

    .ui-widget-content a {
        color: #428bca;
    }

    @@media print {

        a[href]:after {
            content: "";
        }

        .btn-primary {
            display: none;
        }

        .report-parameters{
            display:none;
        }

        @@page {
            size: landscape;
        }
    }

    .report-parameters{
        background-color:#eee;
    }

    .hr-divider{
        border-color:#999; margin-top:10px; margin-bottom:10px;
    }
    .hr-separator{
        border-color:#999; border-style:dashed; margin-top:10px; margin-bottom:5px;
    }
    .table-bordered > thead > tr > th.divider-column, .table-bordered > tbody > tr > td.divider-column, .table-bordered > tfoot > tr > th.divider-column {
        border-right: 4px double #808080;
    }

        td > a:after {
        content: '\002B';
    }
    .changed:after {
        content: '\2212';
    }

    .changed {
        font-weight: bold;
    }

    .selected-row{
        background-color: #f7f4e0; /*#f5f5f5;*/
    }

    .display-none{
        display:none;
    }

    td >a.lead-detail-link:after {
        content: '\2023';
    }

</style>


<div class="row" style="margin-top:25px;">
    <div class="col-sm-2 report-parameters">
    <h4>Template Report Parameters</h4>
    @using (Html.BeginForm())
    {


        <div class="row">
            <div class="col-sm-12">
                <hr class="hr-divider" />
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <strong>Breakdowns:</strong>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <select id="breakdown1" name="breakdown1" class="form-control form-inline">
                    <option value=""></option>

                    @{
                        var index = 0;
                        foreach (var breakdown in breakDowns)
                        {
                            <option value="@breakDownValues[index]" @(Model.BreakDownLevel1 == breakDownValues[index] ? "selected" : "")>@breakdown</option>
                            index += 1;
                        }

                    }

                    
                    @*<option value="brand" @(Model.BreakDownLevel1 == "brand" ? "selected" : "")>Brand</option>
                    <option value="leadgroupname" @(Model.BreakDownLevel1 == "leadgroupname" ? "selected" : "")>Lead Group</option>
                    <option value="leadsourcename" @(Model.BreakDownLevel1 == "leadsourcename" ? "selected" : "")>Lead Source</option>
                    <option value="locationid" @(Model.BreakDownLevel1 == "locationid" ? "selected" : "")>Location</option>*@
                </select>
            </div>
        </div>
        <div class="row" style="margin-top:10px">
            <div class="col-sm-12">
                <select id="breakdown2" name="breakdown2" class="form-control form-inline">
                    <option value=""></option>
                    @{
                        var index2 = 0;
                        foreach (var breakdown in breakDowns)
                        {
                            if (@breakDownValues[index2] != Model.BreakDownLevel1)
                            {
                                <option value="@breakDownValues[index2]" @(Model.BreakDownLevel2 == breakDownValues[index2] ? "selected" : "")>@breakdown</option>
                            }
                            index2 += 1;
                        }

                        }

                </select>
            </div>
        </div>
        <div class="row" style="margin-top:10px">
            <div class="col-sm-12">
                <select id="breakdown3" name="breakdown3" class="form-control form-inline">
                    <option value=""></option>
                    @{
                        var index3 = 0;
                        foreach (var breakdown in breakDowns)
                        {
                            if (breakDownValues[index3] != Model.BreakDownLevel2 && breakDownValues[index3] != Model.BreakDownLevel1)
                            {
                                <option value="@breakDownValues[index3]" @(Model.BreakDownLevel3 == breakDownValues[index3] ? "selected" : "")>@breakdown</option>
                            }
                            index3 += 1;
                        }

                    }
                </select>
            </div>
        </div>
        <div class="row" style="margin-top:10px">
            <div class="col-sm-12">
                <select id="breakdown4" name="breakdown4" class="form-control form-inline">
                    <option value=""></option>
                    @{
                        var index4 = 0;
                        foreach (var breakdown in breakDowns)
                        {
                            if (breakDownValues[index4] != Model.BreakDownLevel3 && breakDownValues[index4] != Model.BreakDownLevel2 && breakDownValues[index4] != Model.BreakDownLevel1)
                            {
                                <option value="@breakDownValues[index4]" @(Model.BreakDownLevel4 == breakDownValues[index4] ? "selected" : "")>@breakdown</option>
                            }
                            index4 += 1;
                        }

                    }
                </select>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <hr class="hr-divider" />
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <strong>Lead Type Filters:</strong>
            </div>
        </div>
        <div class="row" style="margin-bottom: 15px;">
            <div class="col-sm-12">
                <input type="checkbox" id="chkBadDuplicates" name="chkBadDuplicates" @(Model.ExcludeBadDuplicates == true ? "checked" : "") /> Exclude Bad Duplicates<br/>
                <input type="checkbox" id="chkShowExcluded" name="chkShowExcluded" @(Model.ShowExcludedGroups == true ? "checked" : "") /> Show Excluded Groups<br />
                <input type="checkbox" id="chkExcludeAllBad" name="chkExcludeAllBad" @(Model.ExcludeAllBad == true ? "checked" : "") /> Exclude All Bad Leads
            </div>
        </div>

        <div class="row">
            <div class="col-sm-12">
                <hr class="hr-divider" />
            </div>
        </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <strong>Vehicle Types:</strong>
                        </div>
                    </div>
                    <div class="row" style="margin-bottom: 15px;">
                        <div class="col-sm-12">
                            <input type="radio" value="All" name="chkVehicleType" @(Model.VehicleType == "All" ? "checked" : "") /> All<br />
                            <input type="radio" value="New" name="chkVehicleType" @(Model.VehicleType == "New" ? "checked" : "") /> New<br />
                            <input type="radio" value="Used" name="chkVehicleType" @(Model.VehicleType == "Used" ? "checked" : "") /> Used<br />
                            <input type="radio" value="Handyman" name="chkVehicleType" @(Model.VehicleType == "Handyman" ? "checked" : "") /> Handyman<br />
                            <input type="radio" value="Unspecified" name="chkVehicleType" @(Model.VehicleType == "Unspecified" ? "checked" : "") /> Unspecified<br />
                            @*<input type="checkbox" id="chkVehicleTypeCPO" name="chkVehicleTypeCPO" /> CPO<br />
                            <input type="checkbox" id="chkVehicleTypeMgrSpecial" name="chkVehicleTypeMgrSpecial" /> Manager Special<br />*@
                        </div>
                    </div>
        <div class="row">
            <div class="col-sm-12">
                <hr class="hr-divider" />
            </div>
        </div>
        <div class="row" style="margin-bottom: 15px;">
            <div class="col-sm-12 text-right">
                <button class="btn btn-primary" type="submit" value="submit" name="Submit">Submit</button>
            </div>
        </div>


    }
]

                </div>
    <div class="col-md-10">
        <div class="row">



                @Html.Partial("_TemplateReportByBreakdowns", Model)

             

            }
        </div>
    </div>





            @section scripts{

                <script src="~/Scripts/Chosen/chosen.jquery.js" type="text/javascript"></script>
                <script src="~/Scripts/Chosen/docsupport/prism.js" type="text/javascript" charset="utf-8"></script>
                <script src="~/Scripts/Chosen/docsupport/init.js" type="text/javascript" charset="utf-8"></script>

                <script type="text/javascript">

                    //Set multiple values for a chosen select
                    //var my_val = 3,4,6;
                    //var str_array = my_val.split(',');
                    //$("#set-corsi").val(str_array).trigger("chosen:updated");

                    $(document).ready(function () {

                        $("#breakdown1").change(function () {


                            $("#breakdown2").empty();
                            $("#breakdown3").empty();
                            $("#breakdown4").empty();
                            $("#breakdown2").append("<option value=''></option>");
                            $('#breakdown1 option').each(function () {

                                if ($("#breakdown1").val() != $(this).attr('value') && $(this).attr('value') != '') {
                                    $("#breakdown2").append("<option value='" + $(this).attr('value') + "'>" + $(this).text() + "</option>");
                                }
                            });

                        });

                        $("#breakdown2").change(function () {


                            $("#breakdown3").empty();
                            $("#breakdown4").empty();
                            $("#breakdown3").append("<option value=''></option>");
                            $('#breakdown2 option').each(function () {

                                if ($("#breakdown2").val() != $(this).attr('value') && $(this).attr('value') != '') {
                                    $("#breakdown3").append("<option value='" + $(this).attr('value') + "'>" + $(this).text() + "</option>");
                                }
                            });

                        });

                        $("#breakdown3").change(function () {


                            $("#breakdown4").empty();
                            $("#breakdown4").append("<option value=''></option>");
                            $('#breakdown3 option').each(function () {

                                if ($("#breakdown3").val() != $(this).attr('value') && $(this).attr('value') != '') {
                                    $("#breakdown4").append("<option value='" + $(this).attr('value') + "'>" + $(this).text() + "</option>");
                                }
                            });

                        });


                        $("#locations").chosen().change(function () {

                            var locations;

                            if ($("#locations").val() != null) {
                                locations = $("#locations").val().toString().split(',');
                            }

                            if (locations != null) {
                                @foreach (var location in storeLocations)
                                {
                                    @: if(!locations.includes('@location.Replace(" ", "-").Replace(".", "-").Replace("/", "-").Replace("'", "-").Replace("*", "-").Replace("(", "-").Replace(")", "-")')) {
                                        @: for (i = 0; i < $('.@location.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').length; i++) {
                                            @:$('.@location.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")')[i].classList.add("display-none");
                                        @: }
                                    @: }
                                }
                            }
                            else {
                                @foreach (var location in storeLocations)
                                {
                                    @:$('.@location.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').removeClass("display-none");
                                                                                                                                                                                                                                                                }
                            }

                            if ($("#locations").val() != null) {
                                for (i = 0; i < locations.length; i++) {
                                    for (j = 0; j < $('.' + locations[i] + '').length; j++) {
                                            $('.' + locations[i] + '')[j].classList.remove("display-none");
                                     }
                                }
                            }
                        });

                        $("#brands").chosen().change(function () {

                            var brands;

                            if ($("#brands").val() != null) {
                                brands = $("#brands").val().toString().split(',');
                            }

                            if (brands != null) {
                                @foreach (var brand in brands)
                                {
                                    @: if (!dropdownvalues.includes('@brand.Replace(" ", "-").Replace(".", "-").Replace("/", "-").Replace("'", "-").Replace("*", "-").Replace("(", "-").Replace(")", "-")')) {
                                    @: for (i = 0; i < $('.@brand.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').length; i++) {
                                            @:$('.@brand.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")')[i].classList.add("display-none");
                                    @: }
                                @: }
                                }
                                }
                            else {
                                    @foreach (var brand in brands)
                            {
                            @:$('.@brand.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').removeClass("display-none");
                            }
                            }

                            if ($("#brands").val() != null) {
                                for (i = 0; i < brands.length; i++) {
                                    for (j = 0; j < $('.' + brands[i] + '').length; j++) {
                                        $('.' + brands[i] + '')[j].classList.remove("display-none");
                                    }
                                }
                            }


                            @*if (brands != null) {
                                @foreach (var brand in brands)
                                {
                                    @: for (i = 0; i < $('.@brand.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').length; i++) {
                                        @: var aTarget = $('.@brand.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")')[i].getAttribute('data-collapse');
                                        @:  if ($('#' + aTarget + '')[0].className.indexOf('collapsed') == -1)
                                                @: {
                                                @:      $('#' + aTarget + '')[0].click();
                                                @: }
                                        @:$('.@brand.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")')[i].style.display = "none";

                                    @: }

                                }
                            }
                            else {
                                @foreach (var brand in brands)
                                {
                                    @:$('.@brand.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').show();
                                                                                                                                                                                                                        }
                            }

                            if ($("#brands").val() != null) {
                                for (i = 0; i < brands.length; i++) {
                                    //alert(locations[i]);
                                    $('.' + brands[i].replace(" ", "-").replace(".", "-").replace("/", "-").replace("'", "-").replace("*", "-").replace("(", "-").replace(")", "-") + '').show();
                                }
                            }*@
                        });

                        $("#leadstatus").chosen().change(function () {

                            var dropdownvalues;

                            if ($("#leadstatus").val() != null) {
                                dropdownvalues = $("#leadstatus").val().toString().split(',');
                            }

                            if (dropdownvalues != null) {
                                                            @foreach (var status in leadStatus)
                                {
                                    @: if (!dropdownvalues.includes('@status.Replace(" ", "-").Replace(".", "-").Replace("/", "-").Replace("'", "-").Replace("*", "-").Replace("(", "-").Replace(")", "-")')) {
                                    @: for (i = 0; i < $('.@status.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').length; i++) {
                                            @:$('.@status.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")')[i].classList.add("display-none");
                                    @: }
                                @: }
                                }
                                }
                            else {
                            @foreach (var status in leadStatus)
                            {
                            @:$('.@status.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').removeClass("display-none");
                            }
                            }

                            if ($("#leadstatus").val() != null) {
                                for (i = 0; i < dropdownvalues.length; i++) {
                                    for (j = 0; j < $('.' + dropdownvalues[i] + '').length; j++) {
                                        $('.' + dropdownvalues[i] + '')[j].classList.remove("display-none");
                                    }
                                }
                            }

                            @*if (dropdownvalues != null) {
                                @foreach (var status in leadStatus)
                                {
                                    @: for (i = 0; i < $('.@status.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').length; i++) {
                                    @: var aTarget = $('.@status.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")')[i].getAttribute('data-collapse');
                                    @:  if ($('#' + aTarget + '')[0].className.indexOf('collapsed') == -1)
                                                @: {
                                                @:      $('#' + aTarget + '')[0].click();
                                                @:}

                                    @:$('.@status.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")')[i].style.display = "none";
                                @:}
                            }
                            }
                            else {
                                @foreach (var status in leadStatus)
                                {
                                    @:$('.@status.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').show();
                                                                                                }
                            }

                            if ($("#leadstatus").val() != null) {
                                for (i = 0; i < dropdownvalues.length; i++) {
                                    //alert(locations[i]);
                                    $('.' + dropdownvalues[i].replace(" ", "-").replace(".", "-").replace("/", "-").replace("'", "-").replace("*", "-").replace("(", "-").replace(")", "-") + '').show();
                                }
                            }*@
                        });

                        $("#leadconditions").chosen().change(function () {

                            var dropdownvalues;

                            if ($("#leadconditions").val() != null) {
                                dropdownvalues = $("#leadconditions").val().toString().split(',');
                            }

                            if (dropdownvalues != null) {
                                @foreach (var condition in leadConditions)
                                {
                                    @: if (!dropdownvalues.includes('@condition.Replace(" ", "-").Replace(".", "-").Replace("/", "-").Replace("'", "-").Replace("*", "-").Replace("(", "-").Replace(")", "-")')) {
                                    @: for (i = 0; i < $('.@condition.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').length; i++) {
                                            @:$('.@condition.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")')[i].classList.add("display-none");
                                    @: }
                                @: }
                                }
                                }
                            else {
                                        @foreach (var condition in leadConditions)
                            {
                            @:$('.@condition.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').removeClass("display-none");
                            }
                            }

                            if ($("#leadconditions").val() != null) {
                                for (i = 0; i < dropdownvalues.length; i++) {
                                    for (j = 0; j < $('.' + dropdownvalues[i] + '').length; j++) {
                                        $('.' + dropdownvalues[i] + '')[j].classList.remove("display-none");
                                    }
                                }
                            }

                            @*if (dropdownvalues != null) {
                                @foreach (var condition in leadConditions)
                                {
                                    @: for (i = 0; i < $('.@condition.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').length; i++) {
                                            @: var aTarget = $('.@condition.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")')[i].getAttribute('data-collapse');
                                            @:  if ($('#' + aTarget + '')[0].className.indexOf('collapsed') == -1)
                                                @: {
                                                @:      $('#' + aTarget + '')[0].click();
                                                    @:}
                                        @:$('.@condition.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")')[i].style.display = "none";
                                        @: }

                                }
                            }
                            else {
                                @foreach (var condition in leadConditions)
                                {
                                    @:$('.@condition.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').show();
                                }
                            }

                            if ($("#leadconditions").val() != null) {
                                for (i = 0; i < dropdownvalues.length; i++) {
                                    //alert(locations[i]);
                                    $('.' + dropdownvalues[i].replace(" ", "-").replace(".", "-").replace("/", "-").replace("'", "-").replace("*", "-").replace("(", "-").replace(")", "-") + '').show();
                                }
                            }*@
                        });

                        @*$("#leadsources").chosen().change(function () {

                            var dropdownvalues;

                            if ($("#leadsources").val() != null) {
                                dropdownvalues = $("#leadsources").val().toString().split(',');
                            }
                            
                            if (dropdownvalues != null) {
                                @foreach (var source in leadSources)
                                {
                                    @: if (!dropdownvalues.includes('@source.Replace(" ", "-").Replace(".", "-").Replace("/", "-").Replace("'", "-").Replace("*", "-").Replace("(", "-").Replace(")", "-").Replace("`", "-")')) {
                                    @: for (i = 0; i < $('.@source.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-").Replace("`", "-")').length; i++) {
                                            @:$('.@source.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-").Replace("`", "-")')[i].classList.add("display-none");
                                    @: }
                                @: }
                        }
                        }
                    else {
                                        @foreach (var source in leadSources)
                    {
                    @:$('.@source.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-").Replace("`", "-")').removeClass("display-none");
                    }
                    }

                    if ($("#leadsources").val() != null) {
                        for (i = 0; i < dropdownvalues.length; i++) {
                            for (j = 0; j < $('.' + dropdownvalues[i] + '').length; j++) {
                                $('.' + dropdownvalues[i] + '')[j].classList.remove("display-none");
                            }
                        }
                    }

                    });*@


                        $("#leadgroups").chosen().change(function () {

                            var dropdownvalues;

                            if ($("#leadgroups").val() != null) {
                                dropdownvalues = $("#leadgroups").val().toString().split(',');
                            }

                            if (dropdownvalues != null) {
                                @foreach (var group in leadGroups)
                                {
                                    @: if (!dropdownvalues.includes('@group')) {
                                        @: for (i = 0; i < $('.@group.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').length; i++) {
                                                @:$('.@group.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")')[i].classList.add("display-none");
                                        @: }
                                    @: }
                                }
                            }
                            else {
                                @foreach (var group in leadGroups)
                                {
                                    @:$('.@group.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').removeClass("display-none");
                                }
                            }

                            if ($("#leadgroups").val() != null) {
                                for (i = 0; i < dropdownvalues.length; i++) {
                                    for (j = 0; j < $('.' + dropdownvalues[i].replace(" ", "-").replace(".", "-").replace("/", "-").replace("'", "-").replace("*", "-").replace("(", "-").replace(")", "-") + '').length; j++) {
                                        $('.' + dropdownvalues[i].replace(" ", "-").replace(".", "-").replace("/", "-").replace("'", "-").replace("*", "-").replace("(", "-").replace(")", "-") + '')[j].classList.remove("display-none");
                                    }
                                }
                            }


                            @*if (dropdownvalues != null) {
                                @foreach (var group in leadGroups)
                                {
                                    @: for (i = 0; i < $('.@group.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').length; i++) {
                                            @: var aTarget = $('.@group.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")')[i].getAttribute('data-collapse');
                                            @:  if ($('#' + aTarget + '')[0].className.indexOf('collapsed') == -1)
                                                @: {
                                                @:      $('#' + aTarget + '')[0].click();
                                                @:}

                                    @:$('.@group.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")')[i].style.display = "none";
                                    @: }
                                }
                            }
                            else {
                                @foreach (var group in leadGroups)
                                {
                                    @:$('.@group.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').show();
                                }
                            }

                            if ($("#leadgroups").val() != null) {
                                for (i = 0; i < dropdownvalues.length; i++) {
                                    //alert(locations[i]);
                                    $('.' + dropdownvalues[i].replace(" ", "-").replace(".", "-").replace("/", "-").replace("'", "-").replace("*", "-").replace("(", "-").replace(")", "-") + '').show();
                                }
                            }*@
                        });

                        $("#salesteams").chosen().change(function () {

                            var dropdownvalues;

                            if ($("#salesteams").val() != null) {
                                dropdownvalues = $("#salesteams").val().toString().split(',');
                            }

                            if (dropdownvalues != null) {
                                @foreach (var team in salesTeams)
                                {
                                    @: if (!dropdownvalues.includes('@team.Replace(" ", "-").Replace(".", "-").Replace("/", "-").Replace("'", "-").Replace("*", "-").Replace("(", "-").Replace(")", "-")')) {
                                    @: for (i = 0; i < $('.@team.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').length; i++) {
                                            @:$('.@team.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")')[i].classList.add("display-none");
                                    @: }
                                @: }
                                }
                                }
                            else {
                                @foreach (var team in salesTeams)
                                {
                                    @:$('.@team.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').removeClass("display-none");
                                }
                            }

                            if ($("#salesteams").val() != null) {
                                for (i = 0; i < dropdownvalues.length; i++) {
                                    for (j = 0; j < $('.' + dropdownvalues[i] + '').length; j++) {
                                        $('.' + dropdownvalues[i] + '')[j].classList.remove("display-none");
                                    }
                                }
                            }

                            @*if (dropdownvalues != null) {
                                @foreach (var team in salesTeams)
                                {
                                    @: for (i = 0; i < $('.@team.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').length; i++) {
                                            @: var aTarget = $('.@team.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")')[i].getAttribute('data-collapse');
                                            @:  if ($('#' + aTarget + '')[0].className.indexOf('collapsed') == -1)
                                                @: {
                                                @:      $('#' + aTarget + '')[0].click();
                                                @:}

                                    @:$('.@team.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")')[i].style.display = "none";
                                        @: }
                                }
                            }
                            else {
                                @foreach (var team in salesTeams)
                                {
                                    @:$('.@team.Replace(" ","-").Replace(".","-").Replace("/","-").Replace("'","-").Replace("*","-").Replace("(","-").Replace(")","-")').show();
                                }
                            }

                            if ($("#salesteams").val() != null) {
                                for (i = 0; i < dropdownvalues.length; i++) {
                                    //alert(locations[i]);
                                    $('.' + dropdownvalues[i].replace(" ", "-").replace(".", "-").replace("/", "-").replace("'", "-").replace("*", "-").replace("(", "-").replace(")", "-") + '').show();
                                }
                            }*@
                        });

                        $('#chkComparison').click(function () {

                            if ($(".comparison-row").is(':visible')) {
                                $('.comparison-row').hide();
                            }
                            else {
                                $('.comparison-row').show();
                            }

                        });


                    });

                </script>
            }
